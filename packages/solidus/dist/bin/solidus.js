#!/usr/bin/env node
import{Process as r}from"@swindle/os";import{DateTime as e}from"@swindle/core";import o from"chalk";import{Container as s}from"@swindle/container";import{buildApp as n}from"@solidusjs/utilities";import{Path as t}from"@swindle/filesystem";class i{constructor(){}info(r){const e=this.formatMessage(r);console.log(o.green(e))}error(r){const e=this.formatMessage(`Error: ${r}`);console.log(o.red(e))}warn(r){const e=this.formatMessage(r);console.log(o.yellow(e))}formatMessage(r){const o=e.Now();return`[${o.year()}-${o.month()}-${o.day()}] ${r.trim()}`}}const a=new s;var c,l;a.bind(i,(r=>new i)),function(r){r.build="build",r.dev="dev",r.start="start",r.help="-h",r.version="-v"}(c||(c={})),function(r){r[r.Success=0]="Success",r[r.Error=1]="Error"}(l||(l={}));(async()=>{const[o,s,...m]=r.argv,u=m[0];u===c.build?await(async()=>{const e=r.Cwd(),o=a.get(i);try{return await n({root:e,assetsDir:t.FromSegments(e,"src/assets/**/**"),clientEntryPoint:t.FromSegments(e,"src/client.ts"),outputDir:t.FromSegments(e,"dist"),serverEntryPoint:t.FromSegments(e,"src/server.ts"),onBeforeRollup:async()=>{o.info("Building your application bundle.")},onGenerate:async()=>{o.info("Successfully created your application bundle.")}}),l.Success}catch(r){const e=r;return o.error(e.message),l.Error}})():u===c.dev||u==c.start||(u==c.help||""==u?await(async()=>{const r=a.get(i),o=`\n   \n      SolidusJS CLI\n      Usage:               solidus <command>\n      -v                   Displays the current version of SolidusJS being run.\n      -h                   Shows this help message.\n\n      Commands\n         build             Builds the application for production.\n         dev               Starts the application in Development Mode.\n         start             Starts the application in production.\n      \n      Â© ${e.Now().year()} Perivel LLC. All rights reserved.\n\n   `;return r.info(o),l.Success})():(a.get(i).error("Invalid command."),l.Error))})();
